<VirtualHost 0.0.0.0:8080>
    ServerName ckan
    ServerAlias *

    <Directory "${CKAN_CONFIG}">
      Require all granted
    </Directory>

    <Location /user/register>
      AuthType Basic
      AuthName "Registration Restricted, please Login."
      AuthUserFile ${CKAN_CONFIG}/htpasswd
      Require valid-user
    </Location>

    WSGIScriptAlias / ${CKAN_CONFIG}/apache.wsgi
    WSGIPassAuthorization On

    ErrorLog /var/log/apache2/ckan_default.error.log
    CustomLog /var/log/apache2/ckan_default.custom.log combined
</VirtualHost>
